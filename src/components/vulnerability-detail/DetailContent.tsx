import Chips from "@/components/vulnerability-db/Chips";
import { DetailContentProps } from "@/types/vulnerability";
import ShareButton from "./ShareButton";
import parse from "html-react-parser";
import Clip from "../common/Clip";
import { getSession } from "@/lib/getSession";

/**
 * @description `DetailContent` 컴포넌트는 취약성 뉴스의 세부 정보를 표시하는 UI 컴포넌트입니다.
 * 이 컴포넌트는 사용자가 핀 및 공유 버튼을 사용하여 뉴스 항목을 핀하거나 링크를 공유할 수 있도록 합니다.
 *
 * @returns {JSX.Element} 취약성 뉴스의 제목, 설명 및 핀 및 공유 버튼이 포함된 세부 정보 컴포넌트를 반환합니다.
 */

async function DetailContent({ detailData, dataId }: DetailContentProps) {
  const session = await getSession();
  return (
    <>
      <div key={dataId}>
        <div className="flex flex-col gap-3 border-b border-neutral-30 pb-[30px]">
          <div className="flex flex-col gap-3">
            <Chips view={detailData.view} />
            <h1 className="text-[21px]">{detailData.title}</h1>
          </div>
          <div className="flex justify-between">
            <div className="flex text-sm text-neutral-40">
              <span>{detailData.subtitle}</span>
            </div>
            <div className="flex gap-5">
              <Clip id={dataId} />
              <ShareButton />
            </div>
          </div>
        </div>
        <div className="border-b border-neutral-30 pb-[30px] pt-[30px]">
          {/* html-react-parser를 사용하여 HTML 문자열을 JSX로 변환 */}
          <div className="w-full px-2">{parse(detailData.content)}</div>
        </div>
      </div>
    </>
  );
}

export default DetailContent;
